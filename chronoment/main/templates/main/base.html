<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chronoment - {% block page_title %}{% endblock page_title %}</title>
    
    {# Load Inter font from Google Fonts #}
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    {# Tailwind CSS CDN - Essential for styling #}
    <script src="https://cdn.tailwindcss.com"></script>

    <style type="text/css">
        /* Apply Inter font globally and set basic box-sizing */
        html, body {
            font-family: 'Inter', sans-serif;
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            overflow-x: hidden; /* Prevent horizontal scrollbar */
        }

        /* --- CSS Grid Layout for the entire page --- */
        /* This creates two columns: a fixed-width sidebar and a flexible main content area */
        .grid-container {
            display: grid;
            grid-template-columns: 240px 1fr; /* Sidebar fixed width, main content takes rest */
            grid-template-rows: 1fr; /* Single row for content */
            min-height: 100vh; /* Ensure the container takes full viewport height */
            background-color: #f3f4f6; /* Light gray background for the entire page */
        }

        /* Sidebar Styling */
        .sidebar {
            grid-column: 1;
            background-color: #1a202c; /* Darker background for the sidebar */
            color: #e2e8f0; /* Light text color */
            padding: 24px 16px;
            display: flex;
            flex-direction: column;
            gap: 12px; /* Space between nav items */
            box-shadow: 2px 0 8px rgba(0, 0, 0, 0.1); /* Subtle shadow */
            overflow-y: auto; /* Allow sidebar to scroll if content overflows */
        }

        .sidebar-logo {
            font-size: 1.75rem; /* text-3xl */
            font-weight: 800; /* font-extrabold */
            color: #6366f1; /* Indigo-500 */
            text-align: center;
            margin-bottom: 24px; /* mb-6 */
            letter-spacing: -0.025em; /* tracking-tight */
        }

        .sidebar a {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            border-radius: 8px; /* rounded-lg */
            color: #cbd5e0; /* text-gray-300 */
            font-size: 1rem; /* text-base */
            font-weight: 500; /* font-medium */
            text-decoration: none;
            transition: background-color 0.2s ease, color 0.2s ease;
        }

        .sidebar a:hover {
            background-color: #2d3748; /* bg-gray-800 */
            color: #ffffff; /* text-white */
        }

        .sidebar a.active { /* Style for active link, if you implement it */
            background-color: #4338ca; /* bg-indigo-700 */
            color: #ffffff;
            font-weight: 600; /* font-semibold */
        }

        /* Main Content Area Styling */
        .main-content {
            grid-column: 2;
            padding: 32px; /* p-8 */
            overflow-y: auto; /* Allow main content to scroll independently */
            display: flex;
            flex-direction: column;
            align-items: center; /* Center content horizontally within main-content */
            justify-content: flex-start; /* Align content to the top */
            min-height: 100vh; /* Ensure it takes full height for centering to work */
        }

        /* Responsive adjustments for smaller screens */
        @media (max-width: 768px) {
            .grid-container {
                grid-template-columns: 1fr; /* Single column layout */
                grid-template-rows: auto 1fr; /* Sidebar takes auto height, main content takes rest */
            }
            .sidebar {
                grid-column: 1;
                grid-row: 1;
                width: 100%; /* Full width sidebar */
                padding: 16px;
                flex-direction: row; /* Horizontal layout for nav items */
                justify-content: space-around; /* Distribute items evenly */
                flex-wrap: wrap; /* Allow items to wrap */
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); /* Shadow at the bottom */
            }
            .sidebar-logo {
                display: none; /* Hide logo on small screens */
            }
            .sidebar a {
                padding: 8px 12px;
                font-size: 0.875rem; /* text-sm */
            }
            .main-content {
                grid-column: 1;
                grid-row: 2;
                padding: 24px; /* p-6 */
            }
        }
    </style>
</head>

<body>
    <div class="grid-container">
        {# Sidebar Navigation #}
        <div class="sidebar">
            <div class="sidebar-logo">Chronoment</div>
            
            <a href="{% url 'home' %}">
                <svg class="w-5 h-5 mr-3" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"></path></svg>
                Home
            </a>
            
            {% if not user.is_authenticated %}
                <a href="{% url 'register' %}">
                    <svg class="w-5 h-5 mr-3" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"></path></svg>
                    Register
                </a>
                <a href="{% url 'login' %}">
                    <svg class="w-5 h-5 mr-3" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 2a1 1 0 00-1 1v3.586l-2.293-2.293a1 1 0 00-1.414 1.414l4 4a1 1 0 001.414 0l4-4a1 1 0 00-1.414-1.414L11 6.586V3a1 1 0 00-1-1z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M4 9a2 2 0 00-2 2v4a2 2 0 002 2h12a2 2 0 002-2v-4a2 2 0 00-2-2H4zm5 5a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path></svg>
                    Login
                </a>
            {% endif %}

            {% if user.is_authenticated %}
                <div class="border-t border-gray-700 my-3"></div> {# Separator #}
                <a href="{% url 'create_story' %}">
                    <svg class="w-5 h-5 mr-3" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd"></path></svg>
                    Create Story
                </a>
                <a href="{% url 'select_story_for_senders' %}">
                    <svg class="w-5 h-5 mr-3" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18H4v-3a6 6 0 0112 0v3z"></path></svg>
                    Manage Senders
                </a>
                <a href="{% url 'logout' %}">
                    <svg class="w-5 h-5 mr-3" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z" clip-rule="evenodd"></path></svg>
                    Logout
                </a>
            {% endif %}
        </div>

        {# Main Content Area #}
        <div class="main-content">
            {# Django Messages Display #}
            {% if messages %}
                <div class="w-full max-w-3xl mb-6">
                    {% for message in messages %}
                        <div class="px-5 py-3 rounded-lg relative mb-3 shadow-sm
                            {% if message.tags == 'success' %}bg-green-100 border border-green-400 text-green-700{% endif %}
                            {% if message.tags == 'error' %}bg-red-100 border border-red-400 text-red-700{% endif %}
                            {% if message.tags == 'info' %}bg-blue-100 border border-blue-400 text-blue-700{% endif %}
                            {% if message.tags == 'warning' %}bg-yellow-100 border border-yellow-400 text-yellow-700{% endif %}">
                            <span class="block sm:inline font-medium">{{ message }}</span>
                        </div>
                    {% endfor %}
                </div>
            {% endif %}

            {# Block for page-specific content #}
            {% block content %}
                {# Default content or placeholder for pages that don't define their own 'content' block #}
            {% endblock content %}
        </div>
    </div>
</body>
</html>